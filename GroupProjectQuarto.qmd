---
title: "GroupProjectQuarto"
author: "Claire Savage, Dani Wells, Abby drongpa"
format: html
editor: visual
code-fold: true
self-contained: true
execute: 
  error: true
  echo: true
  message: false
  warning: false
---

```{r setup}
library(tidyverse)
library(here)
library(dplyr)
CO2_emissions <- read_csv(here::here("co2_cons.csv"))
lex_data <- read.csv(here::here("lex.csv"))
```

## Data and Variable Descriptions

For this project we will be looking at the Relationship between life expectancy at birth and total CO2 emissions. We will be using the "Life expectancy, at birth" and "Consumption CO2 emissions, million tonnes" variables from Gapminder in our analysis. Life expectancy at birth is measured in years and measures the number of years an infant born in the given country in the given year would live if mortality rates stay the same throughout its life. Total CO2 emissions is measured in million tonnes and is the total carbon dioxide emitted from each country per Capita.

## Hypothesized Relationship

We believe that increased levels of CO2 emission decrease life expectancy. According to a study conducted by the [National Library of Medicine](https://www.ncbi.nlm.nih.gov/pmc/articles/PMC8782287/#:~:text=Carbon%20emissions%20have%20a%20significantly,decreases%20life%20expectancy%20by%200.012%25.), “Carbon emissions have a significantly negative impact on life expectancy, suggesting that higher the carbon emissions lower the life expectancy.” Which is in line with the harmful effects we know CO2 has on the human body.

## Data Cleaning

```{r}
CO2_emissions_clean <- CO2_emissions %>%
  mutate(`2022` = ifelse(str_detect(`2022`, "k"), 
                          as.numeric(str_replace(`2022`, "k", "")) * 1000, 
                          as.numeric(`2022`)),
         `2021` = ifelse(str_detect(`2021`, "k"), 
                          as.numeric(str_replace(`2021`, "k", "")) * 1000, 
                          as.numeric(`2021`))) %>% 
  mutate(across(c(`2003`:`2006`,`2011`:`2013`), as.numeric)) %>% 
  select(country, `1920`:`2020`) %>% 
  pivot_longer(cols = `1920`:`2020`,
               names_to = "year",
               values_to = "emissions")


```

#Abby

```{r}
lex_clean <- lex_data %>%
  select(country, X1920:X2020) %>%
  rename_with(~str_remove(., "^X"), starts_with("X")) %>%
  filter(if_all(c(`1920`:`2020`), ~ !is.na(.)))


```

Pivot Longer

Joining Data
